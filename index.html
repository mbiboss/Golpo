<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golpo by ✿ㅤ"MʙɪㅤDᴀʀᴋ"</title>
    <link rel="stylesheet" href="style.css?v=8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="assets/logo.png">
    <style>
        /* Emergency override for search highlights */
        .search-highlight {
            background: linear-gradient(45deg, #ff0000, #ff6b6b) !important;
            color: #ffffff !important;
            padding: 3px 6px !important;
            border-radius: 6px !important;
            font-weight: 900 !important;
            box-shadow: 0 2px 8px rgba(255, 0, 0, 0.5) !important;
            border: 2px solid #ffffff !important;
        }
    </style>
</head>
<body data-theme="dark">
    <!-- Background Particles -->
    <div class="particles-container">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    <!-- Dynamic Island Style Navigation -->
    <nav class="nav-container">
        <div class="nav-island">
            <div class="nav-left">
                <img src="https://i.postimg.cc/Rh4B24Dk/Mbi-dark.png" alt="MB Logo" class="logo" onerror="this.src='assets/logo.png'">
                <span class="logo-text" id="logoText">Golpo</span>
            </div>
            
            <div class="nav-center">
                <button class="selection-btn music-selector-btn" id="musicSelector" title="Select Music">
                    <i class="fas fa-music"></i>
                    <span class="selector-text">Select Music</span>
                </button>
                
                <button id="playPauseBtn" class="control-btn" title="Play/Pause Music">
                    <i class="fas fa-play icon"></i>
                </button>
                
                <div class="nav-progress-container" id="progressContainer" title="Reading Progress">
                    <div class="nav-progress-bar">
                        <div class="nav-progress-fill" id="progressFill"></div>
                    </div>
                    <span class="nav-progress-text" id="progressPercentage">0%</span>
                </div>
            </div>
            
            
            <div class="nav-right">
                <!-- Reading Controls Dropdown -->
                <div class="reading-controls-dropdown" id="readingControlsDropdown">
                    <button class="control-btn reading-controls-btn" id="readingControlsBtn" title="Reading Controls">
                        <i class="fas fa-sliders-h"></i>
                    </button>
                    <div class="reading-controls-menu" id="readingControlsMenu">
                        <div class="control-group">
                            <label class="control-label">Font Size</label>
                            <div class="font-size-controls">
                                <button class="control-btn" id="decreaseFontBtn" title="Decrease Font Size">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <span class="font-size-display" id="fontSizeDisplay">100%</span>
                                <button class="control-btn" id="increaseFontBtn" title="Increase Font Size">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Reading Mode</label>
                            <button class="control-btn mode-btn" id="focusModeBtn" title="Toggle Focus Mode">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Quick Actions</label>
                            <div class="quick-actions">
                                <button class="control-btn" id="scrollTopBtn" title="Scroll to Top">
                                    <i class="fas fa-arrow-up"></i>
                                </button>
                                <button class="control-btn" id="bookmarkBtn" title="Bookmark Position">
                                    <i class="fas fa-bookmark"></i>
                                </button>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Search in Story</label>
                            <div class="search-container">
                                <input type="text" id="searchInput" class="search-input" placeholder="Search text...">
                                <button class="control-btn" id="searchBtn" title="Search">
                                    <i class="fas fa-search"></i>
                                </button>
                                <button class="control-btn" id="clearSearchBtn" title="Clear Search">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="search-results" id="searchResults"></div>
                        </div>
                    </div>
                </div>
                
                <button id="themeToggle" class="control-btn theme-toggle" title="Toggle Theme">
                    <i class="fas fa-moon icon"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Focus Mode Exit Button -->
    <button id="focusExitBtn" class="focus-exit-btn" title="Exit Focus Mode" style="display: none;">
        <i class="fas fa-times"></i>
    </button>

    <!-- Main Content Area -->
    <main class="main-content" id="mainContent">
        <!-- Landing/Library View -->
        <div class="library-view" id="libraryView">
            <!-- Hero Section -->
            <section class="hero-section">
                <div class="hero-content">
                    <h1 class="hero-title">Welcome to Golpo</h1>
                    <p class="hero-subtitle">আমার লেখা গল্পঃ এর সংসার</p>
                    <div class="hero-description english-text">
                        <p>My Own Story From The Heart</p>
                    </div>
                    <div class="continue-reading" id="continueReading" style="display: none;">
                        <button class="continue-btn" onclick="continuePreviousReading()">
                            <i class="fas fa-play"></i>
                            <span>Continue Reading</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Story Library -->
            <section class="story-library">
                <div class="library-header">
                    <h2 class="library-title english-text">Story Collection</h2>
                    <div class="library-actions">
                        <button class="search-toggle" onclick="toggleSearch()" aria-label="Toggle story search" title="Search stories">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>

                <div class="search-section" id="searchSection" style="display: none;">
                    <div class="search-container">
                        <input type="text" id="globalSearch" class="global-search" placeholder="Search stories...">
                        <button class="search-btn" onclick="performGlobalSearch()" aria-label="Search stories" title="Search">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>

                <div class="story-grid">
                    <div class="story-card" data-story="bissash.txt" onclick="loadStoryFromCard('bissash.txt')">
                        <div class="story-cover">
                            <img src="https://i.postimg.cc/zv9rwb84/Bissash-wide.png" alt="বিশ্বাস Cover" />
                            <div class="story-overlay">
                                <div class="play-button">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                        </div>
                        <div class="story-info">
                            <h3 class="story-title">বিশ্বাস</h3>
                            <p class="story-description english-text">A story about trust and faith</p>
                            <div class="story-meta">
                                <span class="author">✿ㅤ"MʙɪㅤDᴀʀᴋ"</span>
                                <div class="meta-right">
                                    <span class="reading-time">~15 min read</span>
                                    <span class="status available">Available</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="story-card upcoming" data-story="upcoming.txt" onclick="loadStoryFromCard('upcoming.txt')">
                        <div class="story-cover">
                            <img src="https://i.postimg.cc/0yjGwmHJ/banner.gif" alt="Upcoming Stories Cover" />
                            <div class="story-overlay">
                                <div class="coming-soon-badge">Coming Soon</div>
                            </div>
                        </div>
                        <div class="story-info">
                            <h3 class="story-title english-text">Upcoming Stories</h3>
                            <p class="story-description english-text">More beautiful stories coming soon...</p>
                            <div class="story-meta">
                                <span class="author">✿ㅤ"MʙɪㅤDᴀʀᴋ"</span>
                                <div class="meta-right">
                                    <span class="reading-time">~Coming Soon</span>
                                    <span class="status upcoming">Upcoming</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Reader View -->
        <div class="reader-view" id="readerView" style="display: none;">
            <div class="reader-header">
                <button class="back-btn" onclick="returnToLibrary()" aria-label="Return to story library" title="Back to Library">
                    <i class="fas fa-arrow-left"></i>
                    <span>Library</span>
                </button>
            </div>

            <article class="story-reader">
                <header class="story-header">
                    <div class="story-cover-small">
                        <img id="readerCoverImage" src="https://i.postimg.cc/FKDXWnhy/Bissash-small.png" alt="Story Cover" />
                    </div>
                    <div class="story-title-section">
                        <h1 id="readerStoryTitle" class="story-title-large">Story Title</h1>
                        <p id="readerAuthor" class="story-author">by ✿ㅤ"MʙɪㅤDᴀʀᴋ"</p>
                        <div class="story-details">
                            <span id="readerReadingTime" class="reading-time">~15 min read</span>
                            <span class="divider">•</span>
                            <span id="readerWordCount" class="word-count">~2,500 words</span>
                        </div>
                    </div>
                </header>

                <div class="story-content" id="storyContent" lang="bn">
                    <!-- Story content will be loaded here -->
                </div>

                <footer class="story-footer">
                    <div class="story-navigation">
                        <button class="nav-btn prev-btn" id="prevStoryBtn" onclick="loadPreviousStory()" disabled aria-label="Load previous story" title="Previous Story">
                            <i class="fas fa-chevron-left"></i>
                            <span>Previous Story</span>
                        </button>
                        <button class="nav-btn next-btn" id="nextStoryBtn" onclick="loadNextStory()" disabled aria-label="Load next story" title="Next Story">
                            <span>Next Story</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </footer>
            </article>
        </div>
        
        <!-- Hidden Audio Player -->
        <audio id="audioPlayer" loop></audio>
        
        <!-- YouTube Music Player -->
        <div id="youtubePlayer" style="display: none;">
            <iframe id="youtubeFrame" width="0" height="0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </div>
    </main>

    <!-- Story Selection Modal -->
    <div class="selection-modal" id="storyModal">
        <div class="modal-overlay" id="storyModalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Choose Your Story</h3>
                <button class="modal-close" id="closeStoryModal">&times;</button>
            </div>
            <div class="selection-cards">
                <div class="selection-card story-card" data-story="bissash.txt">
                    <div class="card-icon">📖</div>
                    <div class="card-title">বিশ্বাস</div>
                    <div class="card-description">A touching Bengali story</div>
                </div>
                <div class="selection-card story-card" data-story="upcoming.txt">
                    <div class="card-icon">🚀</div>
                    <div class="card-title">Upcoming</div>
                    <div class="card-description">Coming soon...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Music Selection Modal -->
    <div class="selection-modal" id="musicModal">
        <div class="modal-overlay" id="musicModalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Choose Your Music</h3>
                <button class="modal-close" id="closeMusicModal">&times;</button>
            </div>
            <div class="selection-cards">
                <div class="selection-card music-card" data-music="https://www.youtube.com/embed/orvJCBTodiY?autoplay=1&loop=1&playlist=orvJCBTodiY">
                    <div class="card-icon">🎵</div>
                    <div class="card-title">Tare ami chuye dekhini</div>
                    <div class="card-description">Bengali romantic melody</div>
                </div>
                <div class="selection-card music-card" data-music="https://www.youtube.com/embed/aJYmxB1iiIU?autoplay=1&loop=1&playlist=aJYmxB1iiIU">
                    <div class="card-icon">🎶</div>
                    <div class="card-title">Hindi Mashup 1</div>
                    <div class="card-description">Popular Hindi songs</div>
                </div>
                <div class="selection-card music-card" data-music="https://www.youtube.com/embed/kMU97_dBg_U?autoplay=1&loop=1&playlist=kMU97_dBg_U">
                    <div class="card-icon">🦇</div>
                    <div class="card-title">Batman ansak</div>
                    <div class="card-description">Dark & mysterious</div>
                </div>
                <div class="selection-card music-card" data-music="https://www.youtube.com/embed/Fx6Pk1od_Fo?autoplay=1&loop=1&playlist=Fx6Pk1od_Fo">
                    <div class="card-icon">🎤</div>
                    <div class="card-title">Bangla Mashup</div>
                    <div class="card-description">Bengali song collection</div>
                </div>
                <div class="selection-card music-card" data-music="https://www.youtube.com/embed/nKaBbplkMB4?autoplay=1&loop=1&playlist=nKaBbplkMB4">
                    <div class="card-icon">🎭</div>
                    <div class="card-title">Hindi Mashup</div>
                    <div class="card-description">Bollywood favorites</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-left">
                <img src="https://i.postimg.cc/Rh4B24Dk/Mbi-dark.png" alt="MB Logo" class="footer-logo" onerror="this.src='assets/logo.png'">
                <p class="english-text">✿ㅤ"MʙɪㅤDᴀʀᴋ"&copy; 2025 Golpo. All rights reserved.</p>
            </div>
            
            <div class="footer-right">
                <div class="social-links">
                    <a href="https://www.facebook.com/mbiboss.1/" class="social-link" title="Facebook" target="_blank"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://www.youtube.com/@Bekar_Golpo" class="social-link" title="YouTube" target="_blank"><i class="fab fa-youtube"></i></a>
                    <a href="https://discord.com/users/731544517542674443r" class="social-link" title="Discord" target="_blank"><i class="fab fa-discord"></i></a>
                    <a href="https://wa.me/8801317460865" class="social-link" title="WhatsApp" target="_blank"><i class="fab fa-whatsapp"></i></a>
                    <a href="mailto:ooismailforajioo@gmail.com" class="social-link" title="Email" target="_blank"><i class="fas fa-envelope"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js?v=20" defer></script>
</body>
</html>
